<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cute Whack-a-Mole â€” 20s</title>
  <style>
    :root{
      --bg: #fdf7ff;
      --panel: #ffffff;
      --accent: #a78bfa;
      --accent-2: #f472b6;
      --text: #2b2b2b;
      --hole: #f3e8ff;
      --hole-border: #e9d5ff;
      --good: #22c55e;
      --bad: #ef4444;
      --shadow: 0 10px 30px rgba(167,139,250,.25);
    }

    @keyframes pop {
      0% { transform: translateY(10%) scale(.9); opacity: 0; }
      100% { transform: translateY(0) scale(1); opacity: 1; }
    }

    @keyframes bonk {
      0% { transform: scale(1); }
      40% { transform: scale(.92) rotate(-3deg); }
      100% { transform: scale(1); }
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0; font-family: ui-rounded, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 800px at 80% -10%, #fff 0%, var(--bg) 55%) no-repeat;
      color: var(--text);
      display: grid; place-items: center; padding: 18px;
    }

    .app{
      width: min(95vw, 780px);
      background: var(--panel);
      border-radius: 22px; box-shadow: var(--shadow);
      padding: clamp(16px, 3vw, 28px);
    }

    .header{ display:flex; align-items:center; justify-content:space-between; gap: 12px; margin-bottom: 16px; }
    .title{ display:flex; align-items:center; gap:12px; }
    .logo{ width: 40px; height: 40px; border-radius: 12px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); display:grid; place-items:center; color:white; font-weight:900; }
    h1{ font-size: clamp(18px, 2.2vw, 26px); margin:0; }

    .stats{ display:flex; gap: 10px; align-items:center; flex-wrap: wrap; }
    .chip{ background:#faf5ff; border:1px solid #efe7ff; padding:8px 12px; border-radius:999px; font-size:14px; }

    .bar-wrap{ width:100%; height:12px; background:#f3f4f6; border-radius:999px; overflow:hidden; margin: 10px 0 16px; }
    .bar{ height:100%; width:100%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transform-origin:left center; transition: width .2s linear; }

    .controls{ display:flex; align-items:center; gap:10px; flex-wrap: wrap; margin-bottom: 10px; }
    button{ appearance:none; border:none; cursor:pointer; border-radius: 14px; padding:12px 16px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); color:white; font-weight:700; }
    button:active{ transform: translateY(1px) scale(.99); }
    button.secondary{ background:#fff; color: var(--accent); border:1px solid #e9d5ff; box-shadow:none; }

    .grid{ user-select:none; -webkit-user-select:none; touch-action: manipulation; display:grid; grid-template-columns: repeat(3, 1fr); gap: min(16px, 3vw); }

    .hole{ position:relative; aspect-ratio: 1 / 1; background: var(--hole); border: 2px solid var(--hole-border); border-radius: 22px; overflow: hidden; display:grid; place-items:center; cursor:pointer; }
    .hole::after{ content:""; position:absolute; inset:0; background: radial-gradient(200px 120px at -10% -10%, rgba(255,255,255,.6), transparent 50%); pointer-events:none; }

    .mole{ position:absolute; inset: 12% 12% auto 12%; aspect-ratio: 1/1; border-radius: 18px; display:none; background-size: cover; background-position:center; box-shadow: 0 8px 18px rgba(0,0,0,.12); animation: pop .12s ease-out; }
    .mole.hit{ filter: saturate(.3) brightness(.9); animation: bonk .18s ease-in-out; }

    .footer{ text-align:center; opacity:.75; font-size: 13px; margin-top: 14px; }
    .kbd{ font-family: ui-monospace; background:#f4f4f5; border:1px solid #e4e4e7; border-radius:6px; padding:2px 6px; }
  </style>
</head>
<body>
  
  <div class="app" id="app">
    <div class="header">
      <div class="title">
        <h1>Whack-a-Sunghoon</h1>
      </div>
      <div class="stats">
        <div class="chip">Score: <span id="score">0</span></div>
        <div class="chip">Best: <span id="best">0</span></div>
        <div class="chip">Time: <span id="time">20.0</span>s</div>
      </div>
    </div>

    <div class="bar-wrap"><div class="bar" id="timebar"></div></div>

    <div class="controls">
      <button id="startBtn">Start 20s Game</button>
      <button id="resetBest" class="secondary">Reset Best</button>
    </div>

    <div class="grid" id="grid"></div>

    <div class="footer">WACK SUNGHOON as much as possible</div>
  </div>
<!-- Back to Home Button -->
<div style="text-align:center; margin-top: 20px;">
  <button 
    onclick="window.location.href='home.html'" 
    style="
      background-color: #ffb6c1; 
      color: #333; 
      border: none; 
      border-radius: 12px; 
      padding: 12px 24px; 
      font-size: 18px; 
      cursor: pointer; 
      box-shadow: 2px 4px 8px rgba(0,0,0,0.2);
      transition: all 0.2s ease;
    "
    onmouseover="this.style.backgroundColor='#ff9eb0'"
    onmouseout="this.style.backgroundColor='#ffb6c1'"
  >
    Go Back
  </button>
</div>
  <script>
    const MOLE_IMAGE = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSnPfvyXsUVESZcqslE2IvLwY9t3a0TFMxs-g&s";
    const GAME_SECONDS = 20;
    const GRID_SIZE = 9;
    const MIN_SHOW_MS = 650;
    const MAX_SHOW_MS = 1050;
    const SPAWN_GAP_MS = 120;

    const gridEl = document.getElementById('grid');
    const scoreEl = document.getElementById('score');
    const bestEl = document.getElementById('best');
    const timeEl = document.getElementById('time');
    const timebarEl = document.getElementById('timebar');
    const startBtn = document.getElementById('startBtn');
    const resetBestBtn = document.getElementById('resetBest');

    const holes = [];
    for(let i=0;i<GRID_SIZE;i++){
      const hole = document.createElement('div');
      hole.className = 'hole';
      const mole = document.createElement('div');
      mole.className = 'mole';
      mole.style.backgroundImage = `url("${MOLE_IMAGE}")`;
      hole.appendChild(mole);
      gridEl.appendChild(hole);
      holes.push({ hole, mole, busy:false });

      hole.addEventListener('click', ()=>{
        if(!running) return;
        if(mole.style.display === 'none'){ // clicked empty hole
          score = Math.max(0, score - 1);
          scoreEl.textContent = score;
          hole.style.borderColor = 'var(--bad)';
          setTimeout(()=>hole.style.borderColor = 'var(--hole-border)', 300);
        }
      });
    }

    let score = 0;
    let best = Number(localStorage.getItem('cute-mole-best')||0);
    bestEl.textContent = best;
    let gameTimer = null;
    let spawner = null;
    let timeLeft = GAME_SECONDS;
    let running = false;

    function resetUI(){
      score = 0; scoreEl.textContent = '0';
      timeLeft = GAME_SECONDS; timeEl.textContent = timeLeft.toFixed(1);
      timebarEl.style.width = '100%';
      holes.forEach(h=>{ h.mole.style.display='none'; h.busy=false; h.mole.classList.remove('hit'); });
    }

    function randInt(min, max){ return Math.floor(Math.random()*(max-min+1))+min; }
    function pickFreeHole(){
      const free = holes.filter(h=>!h.busy);
      if(!free.length) return null;
      return free[randInt(0, free.length-1)];
    }

    function spawnOnce(){
      if(!running) return;
      const slot = pickFreeHole();
      if(!slot){ setTimeout(spawnOnce, 50); return; }
      slot.busy = true;
      slot.mole.classList.remove('hit');
      slot.mole.style.display = 'block';
      const visibleFor = randInt(MIN_SHOW_MS, MAX_SHOW_MS);
      const hide = () => { slot.mole.style.display = 'none'; slot.busy = false; };
      const hideTimeout = setTimeout(hide, visibleFor);

      const onHit = (e) => {
        e.preventDefault();
        if(!running) return;
        if(slot.mole.classList.contains('hit')) return;
        slot.mole.classList.add('hit');
        score++; scoreEl.textContent = score;
        clearTimeout(hideTimeout);
        setTimeout(()=>{ slot.mole.style.display='none'; slot.busy=false; }, 130);
      };
      slot.mole.onmousedown = onHit;
      slot.mole.ontouchstart = onHit;

      spawner = setTimeout(spawnOnce, SPAWN_GAP_MS + randInt(0, 180));
    }

    function startGame(){
      if(running) return;
      running = true;
      resetUI();
      startBtn.disabled = true; startBtn.textContent = 'Good luck!';
      const startAt = performance.now();
      const endAt = startAt + GAME_SECONDS*1000;
      gameTimer = setInterval(()=>{
        const now = performance.now();
        const remain = Math.max(0, endAt - now);
        timeLeft = remain/1000;
        timeEl.textContent = timeLeft.toFixed(1);
        timebarEl.style.width = (remain/(GAME_SECONDS*1000))*100 + '%';
        if(remain <= 0){ endGame(); }
      }, 50);
      spawnOnce();
    }

    function endGame(){
      if(!running) return;
      running = false;
      clearInterval(gameTimer); gameTimer = null;
      clearTimeout(spawner); spawner = null;
      holes.forEach(h=>{ h.mole.style.display='none'; h.busy=false; });
      if(score > best){ best = score; localStorage.setItem('cute-mole-best', String(best)); bestEl.textContent = best; }
      startBtn.disabled = false; startBtn.textContent = 'Play Again (20s)';
      timebarEl.style.width = '0%';
      timebarEl.style.background = score > 0 ? `linear-gradient(90deg, var(--good), var(--accent))` : `linear-gradient(90deg, var(--bad), var(--accent-2))`;
      setTimeout(()=>{ timebarEl.style.background = `linear-gradient(90deg, var(--accent), var(--accent-2))`; }, 600);
    }

    startBtn.addEventListener('click', startGame);
    resetBestBtn.addEventListener('click', ()=>{ localStorage.removeItem('cute-mole-best'); best = 0; bestEl.textContent = '0'; });
  </script>
</body>
</html>